# Telegram Bot Assistant

Этот Telegram-бот предоставляет несколько режимов работы для помощи в различных задачах: FAQ, AI-ассистент и поиск новостей.

## Функциональность

- **Режим FAQ-помощника (`/mode1`)**:  Режим для ответов на часто задаваемые вопросы. ( *Функциональность определяется в `modes/faq.py`* )
- **Режим AI-ассистента (`/mode2`)**: Режим взаимодействия с AI-ассистентом для получения помощи в различных запросах. ( *Функциональность определяется в `modes/assistant.py`* )
- **Режим поиска новостей (`/mode3`)**: Режим для поиска и краткого обзора новостей по заданным темам с различных новостных ресурсов.

## Как начать

### Предварительные требования

Убедитесь, что у вас установлено следующее:

- **Python 3.7+**
- **pip** (менеджер пакетов Python)
- **Telegram Bot Token** - Получите его у [BotFather](https://t.me/BotFather) в Telegram.
- **API ключ OpenAI** - Необходим для режима AI-ассистента и суммаризации новостей. Получите его на [сайте OpenAI](https://platform.openai.com/account/api-keys).
- **Модель RuBERT** - Путь к предварительно обученной модели RuBERT для классификации новостей (используется в режиме поиска новостей). Вы можете скачать подходящую модель из репозиториев Hugging Face.

### Установка

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/ugine-bor/AI-Assistant.git
   cd AI-Assistant
   ```

2. **Создайте и активируйте виртуальное окружение (рекомендуется):**

   ```bash
   python -m venv venv
   source venv/bin/activate  # для Linux/macOS
   venv\Scripts\activate  # для Windows
   ```

3. **Установите необходимые библиотеки:**

   ```bash
   pip install -r requirements.txt
   ```
   (Если у вас нет файла `requirements.txt`, создайте его и добавьте зависимости: `aiogram`, `python-dotenv`, `transformers`, `langchain-openai` и т.д. Или просто установите их вручную: `pip install aiogram python-dotenv transformers langchain-openai`)

4. **Настройте переменные окружения:**

   - Создайте файл `.env` в корневой директории проекта.
   - Добавьте в него следующие переменные, заменив значения на свои:

     ```dotenv
     TELEGRAM_BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN
     OPENAI_API_KEY=YOUR_OPENAI_API_KEY
     RUBERT=path/to/your/rubert/model  # Путь к вашей модели RuBERT
     INTENSE=0.8 # Порог интенсивности для фильтрации новостей (по умолчанию 0.8)
     ODINC=# URL новостного сайта 1
     UCHET=# URL новостного сайта 2
     PRO1C=# URL новостного сайта 3
     MYBUH=# URL новостного сайта 4
     GOS24=# URL новостного сайта 5
     ```
     **Замените `YOUR_TELEGRAM_BOT_TOKEN`, `YOUR_OPENAI_API_KEY` и `path/to/your/rubert/model` на ваши фактические значения.**  Настройте пути к моделям и, при необходимости, порог `INTENSE` и URL новостных сайтов.

5. **Запустите бота:**

   ```bash
   python run.py
   ```

   Вы увидите сообщение "Бот запущен...", если все настроено правильно.

### Использование

После запуска бота, найдите его в Telegram и начните взаимодействие, используя команды:

- **`/start`**: Вывод приветственного сообщения или справки.
- **`/mode1`**: Активирует режим FAQ-помощника.
- **`/mode2`**: Активирует режим AI-ассистента.
- **`/mode3`**: Активирует режим поиска новостей. После активации режима отправьте запрос в формате:
    `[номер сайта], [количество дней], [тема 1], [тема 2], ...`

    **Пример запроса для режима поиска новостей:**
    `1, 7, Бухгалтерия, Налоги, Отчетность`

    Этот запрос найдет новости за последние 7 дней с сайта под номером 1 (в вашем `.env` файле это `ODINC`), которые соответствуют темам "Бухгалтерия", "Налоги" или "Отчетность".

   **Список номеров сайтов (согласно вашему `.env` файлу):**
     - `1` - `{os.getenv('ODINC')[8:-6]}`
     - `2` - `{os.getenv('UCHET')[8:-6]}`
     - `3` - `{os.getenv('PRO1C')[8:-6]}`
     - `4` - `{os.getenv('MYBUH')[8:-6]}`
     - `5` - `{os.getenv('GOS24')[8:-1]}`


- **В режиме FAQ или AI-ассистента**: Просто отправьте боту сообщение, и он обработает его в соответствии с выбранным режимом.

## Структура проекта

```
telegram-bot-assistant/
├── run.py                # Основной файл запуска бота
├── newsmanager.py        # Модуль для режима поиска новостей
├── rubert.py             # Модуль для классификации текста с использованием RuBERT
├── chatgpt.py            # Модуль для суммаризации текста с использованием ChatGPT
├── modes/                # (Предполагаемая директория)
│   ├── assistant.py      # Модуль для режима AI-ассистента (код не предоставлен)
│   └── faq.py            # Модуль для режима FAQ-помощника (код не предоставлен)
├── news_include/         # (Предполагаемая директория, возможно, внутри newsmanager.py)
│   ├── rubert.py         # (Дубликат или другой файл rubert, если структура разделена)
│   ├── parser.py         # Модуль для парсинга новостей (код не предоставлен)
│   ├── chatgpt.py        # (Дубликат или другой файл chatgpt, если структура разделена)
├── .env                  # Файл с переменными окружения
├── requirements.txt      # Файл с зависимостями проекта (создайте его, если нужно)
└── README.md             # Этот файл
```

## Зависимости

Основные зависимости проекта перечислены в файле `requirements.txt`

Убедитесь, что все зависимости установлены перед запуском бота.

---
